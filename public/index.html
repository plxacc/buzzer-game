<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุนุจุฉ ูู ูุถุบุท ุฃููุงู</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=2">
</head>
<body class="d-flex align-items-center justify-content-center min-vh-100">

    <span class="badge bg-dark ping-badge">ุงูุจูู:  <span id="ping-value">--</span> ms</span>

    <div class="custom-card text-center" id="name-screen">
        <h2 class="mb-4 text-primary">ุฃุฏุฎู ุงุณูู</h2>
        <input type="text" id="username" class="form-control form-control-lg mb-3 text-center" placeholder="ุงูุชุจ ุงุณูู ููุง...">
        <div id="name-error" class="alert alert-danger hidden"></div>
        <button class="btn btn-primary btn-lg w-100 rounded-pill shadow-sm" onclick="submitName()">ุฏุฎูู ุงููุนุจุฉ</button>
    </div>

    <div class="custom-card text-center hidden" id="choice-screen">
        <h2 class="mb-4">ูุฑุญุจูุง <span id="display-name" class="text-success"></span>!</h2>
        <div class="d-grid gap-3">
            <button class="btn btn-success btn-lg rounded-pill shadow-sm" onclick="createRoom()">ุฅูุดุงุก ุบุฑูุฉ (ููุณุช)</button>
            <button class="btn btn-info btn-lg text-white rounded-pill shadow-sm" onclick="showJoin()">ุงูุงูุถูุงู ูุบุฑูุฉ</button>
            <button class="btn btn-outline-danger rounded-pill mt-2" onclick="logout()">ุชุบููุฑ ุงูุงุณู</button>
        </div>
    </div>

    <div class="custom-card text-center hidden" id="join-screen">
        <h2 class="mb-4 text-info">ุงูุงูุถูุงู ููุบุฑูุฉ</h2>
        <input type="text" id="room-code-input" class="form-control form-control-lg mb-3 text-center" placeholder="ุฃุฏุฎู ููุฏ ุงูุบุฑูุฉ (XXXXXX)">
        
        <h5 class="mt-3">ุงุฎุชุฑ ูุฑููู:</h5>
        <select id="team-select" class="form-select form-select-lg mb-4 text-center">
            <option value="team1">ุงููุฑูู ุงูุฃูู ๐ต</option>
            <option value="team2">ุงููุฑูู ุงูุซุงูู ๐ด</option>
        </select>

        <div id="join-error" class="alert alert-danger hidden"></div>
        
        <div class="d-grid gap-2">
            <button class="btn btn-info text-white btn-lg rounded-pill shadow-sm" onclick="joinRoom()">ุงูุถูุงู ุงูุขู</button>
            <button class="btn btn-secondary rounded-pill" onclick="goBackToChoice()">ุงูุนูุฏุฉ</button>
        </div>
    </div>

    <h5 class="text-muted">ุขุฎุฑ ูู ุถุบุท ุงูุฒุฑ:</h5>
        <div class="alert alert-danger fs-4 fw-bold shadow-sm" id="last-pressed">ูุง ุฃุญุฏ</div>
        
        <div id="host-buzzer-timer-view" class="alert alert-danger hidden shadow-sm mb-3">
            <h5>ุงูููุช ุงููุชุจูู: <span id="host-buzzer-timer-value" class="fw-bold fs-4">3</span> ุซูุงูู</h5>
        </div>

        <button class="btn btn-warning btn-lg w-100 rounded-pill mb-4 shadow-sm fw-bold" onclick="resetBuzzer()">ุฅุนุงุฏุฉ ุชูุนูู ุงูุฒุฑ ููุฌููุน</button>

        <div class="alert alert-warning shadow-sm mb-4">
            <h5 class="mb-3">ูุคูุช ุงูููุณุช (10 ุซูุงูู): <strong id="host-timer-display" class="fs-4">10</strong></h5>
            <div class="btn-group w-100" role="group">
                <button class="btn btn-success" onclick="startHostTimer()">โถ๏ธ ุชุดุบูู</button>
                <button class="btn btn-danger" onclick="stopHostTimer()">โธ๏ธ ุฅููุงู</button>
                <button class="btn btn-secondary" onclick="resetHostTimer()">๐ ุชุตููุฑ</button>
            </div>
        </div>

        <h5 class="text-muted">ุขุฎุฑ ูู ุถุบุท ุงูุฒุฑ:</h5>
        <div class="alert alert-danger fs-4 fw-bold shadow-sm" id="last-pressed">ูุง ุฃุญุฏ</div>
        
        <button class="btn btn-warning btn-lg w-100 rounded-pill mb-4 shadow-sm fw-bold" onclick="resetBuzzer()">ุฅุนุงุฏุฉ ุชูุนูู ุงูุฒุฑ ููุฌููุน</button>

        <h4 class="mb-3">ุงูุฃุนุถุงุก ุงููุชุตููู</h4>
        <div id="members-list" class="text-end bg-white p-3 rounded-3 border mb-4" style="max-height: 200px; overflow-y: auto;"></div>
        
        <button class="btn btn-outline-danger w-100 rounded-pill" onclick="leaveRoom()">ูุบุงุฏุฑุฉ ุงูุบุฑูุฉ</button>
    </div>

    <div class="custom-card text-center hidden" id="player-screen">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h4 class="text-primary mb-0" id="player-name-display"></h4>
            <span id="player-team-display" class="badge rounded-pill fs-6 px-3 py-2"></span>
        </div>
        
        <p class="text-muted mb-4">ุฃูุช ูู ุงูุบุฑูุฉ: <strong id="player-room-code" class="text-dark"></strong></p>

        <div id="host-timer-view" class="alert alert-warning fs-5 fw-bold hidden shadow-sm">
            โณ ุงูููุช: <span id="host-timer-value">10</span> ุซูุงูู
        </div>

        <div class="my-5 position-relative">
            <button id="buzzer" class="shadow-lg" onclick="pressBuzzer()">ุงุถุบุท!</button>
        </div>
        
        <h4 id="status" class="mb-4 text-muted">ูุณุชุนุฏุ ุงุตุจุนู ุนูู ุงูุฒุฑ!</h4>

        <div id="buzzer-timer-view" class="alert alert-danger hidden shadow-sm">
            <h5>ูุชู ุฅุนุงุฏุฉ ุชูุนูู ุงูุฒุฑ ุจุนุฏ: <span id="buzzer-timer-value" class="fw-bold fs-4">3</span></h5>
        </div>
        <div id="red-alert" class="alert alert-danger fw-bold fs-5 hidden shadow-sm animate-pulse">
            ๐จ ุงูุชูู ุงูููุช! ๐จ
        </div>

        <button class="btn btn-outline-danger w-100 rounded-pill mt-3" onclick="leaveRoom()">ูุบุงุฏุฑุฉ ุงูุบุฑูุฉ</button>
    </div>

    <audio id="buzzer-sound" src="https://www.myinstants.com/media/sounds/game-show-buzzer.mp3" preload="auto"></audio>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="client.js?v=2"></script>
</body>
</html>